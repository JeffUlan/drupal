<?php

/**
 * @file
 * Contains install and update hooks.
 */

/**
 * Implements hook_install().
 */
function contact_storage_test_install() {
  $entity_type_manager = \Drupal::entityTypeManager();
  $entity_type = $entity_type_manager->getDefinition('contact_message');

  // Recreate the original entity type definition, in order to notify the
  // manager of what changed. The change of storage backend will trigger
  // schema installation.
  // @see contact_storage_test_entity_type_alter()
  $original = clone $entity_type;
  $original->setStorageClass('Drupal\Core\Entity\ContentEntityNullStorage');

  \Drupal::service('entity_type.listener')->onEntityTypeUpdate($entity_type, $original);
}
